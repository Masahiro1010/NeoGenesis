{% extends "game/base.html" %}
{% block title %}æ•°å­—ã®é¸æŠ{% endblock %}

{% block content %}
<style>
    .deck-click {
        transition: background-color 0.2s ease;
    }
    
    .deck-click:hover {
        background-color: rgba(0, 0, 0, 0.5) !important; /* â† è–„ã„ã‚°ãƒ¬ãƒ¼ */
    }

    .selectnum-container {
        margin-top: 30vh; /* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã®ä¸­å¤®ã«é…ç½® */
        font-family: 'Cinzel', serif !important;
        border-radius: 20px;
        padding: 2vh 1vw;
        color : black;
        background-color: white;
    }

    .deck-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 1.2vw;
        justify-items: center;
    }

    @media (max-width: 768px) {
        .selectnum-container {
            margin-top: 0vh; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯å°‘ã—ä¸Šã« */
        }

        .deck-grid {
            grid-template-columns: repeat(3, 1fr);  /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯3åˆ—ã« */
            gap: 2vw;  /* å°‘ã—ä½™è£•ã‚’åºƒã’ã¦ã‚‚OK */
        }
    }
</style>
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">

        <div class="glass-card text-center selectnum-container">
            <h2 class="text-dark mb-4">å¼·åŒ–ã™ã‚‹æ•°å­—ã‚’é¸ã‚“ã§ãã ã•ã„</h2>

            <p class="text-muted mb-1">å¼·åŒ–ã—ãŸã„æ•°å­—ã‚’ãƒ‡ãƒƒã‚­ã‹ã‚‰ã‚¯ãƒªãƒƒã‚¯</p>

            <form method="post" id="number-form">
                {% csrf_token %}
                <input type="hidden" name="number" id="number-input">
                <input type="hidden" name="index" id="index-input">
            </form>
        </div>

        <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’æ¨¡å€£ã—ãŸãƒ‡ãƒƒã‚­èƒŒæ™¯ -->
        <div class="d-flex justify-content-center" style="margin-top: 3vh;">
            <div class="glass-card" style="
                width: 100%;
                padding: 2vh 1vw;
                background-color: white;
                backdrop-filter: blur(10px);
                border-radius: 20px;
            ">
        
                <!-- ã‚°ãƒªãƒƒãƒ‰ã§5åˆ—ã«å¼·åˆ¶ -->
                <div class="deck-grid">
                    {% for card in deck_numbers %}
                        <div class="deck-click text-dark text-center p-3 border rounded"
                            data-number="{{ card.number }}"
                            data-index="{{ forloop.counter0 }}"
                            style="
                                width: 100%;
                                max-width: 160px;
                                background-color: rgba(255, 255, 255, 0.9);
                                cursor: pointer;
                                min-height: 20vh;
                            ">
                            <div class="fw-bold" style="font-size: 2.5vh;">{{ card.number }}</div>
                            <div style="font-size: 0.8rem;">
                                åŠ¹æœ: {{ card.effect|default:"ãªã—" }}<br>
                                ğŸŸ¥ï¼š{{ card.red_seal|yesno:"ã‚ã‚Š,ãªã—" }}<br>
                                ğŸŸ¨ï¼š{{ card.gold_seal|yesno:"ã‚ã‚Š,ãªã—" }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
        
            </div>
        </div>

    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".deck-click").forEach(function (el) {
        el.addEventListener("click", function () {
            const number = el.dataset.number;
            const index = el.dataset.index;

            document.getElementById("number-input").value = number;
            document.getElementById("index-input").value = index;
            document.getElementById("number-form").submit();
        });
    });
});
</script>
{% endblock %}