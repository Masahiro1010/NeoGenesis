{% extends "game/base.html" %}
{% block title %}ランキング{% endblock %}
{% block content %}
<style>
    /* ===== ランキングページ専用 ===== */
    .ranking-page {
        margin-top: 30vh;
        font-family: 'Cinzel', serif !important;
    }
    .ranking-wrap {
        width: 60%;
        margin: 0 auto;
    }
    .ranking-title {
        font-weight: 900;
    }

    /* テーブルの読みやすさ（PC） */
    .ranking-table.table {
        margin-top: 1.25rem;
        background: #fff;
    }
    .ranking-table thead th {
        white-space: nowrap;
    }
    .ranking-table td:nth-child(1),
    .ranking-table td:nth-child(3),
    .ranking-table td:nth-child(4),
    .ranking-table th:nth-child(1),
    .ranking-table th:nth-child(3),
    .ranking-table th:nth-child(4) {
        white-space: nowrap; /* 順位/スコア/日付は折り返さない */
    }
    .ranking-table td:nth-child(2) {
        word-break: break-word; /* ニックネームは折り返し可 */
    }

    /* タブレット以下 */
    @media (max-width: 1024px) {
        .ranking-page { margin-top: 20vh; }
        .ranking-wrap { width: 80%; }
        .ranking-title { font-size: clamp(1.2rem, 3vw, 1.6rem); }
    }

    /* スマホ縦 */
    @media (max-width: 768px) {
        .ranking-page { margin-top: 10vh; padding: 0 3vw; }
        .ranking-wrap {
        width: 100%;
        max-width: 95vw;
        }

        /* 横スクロール可能なコンテナ（bodyはoverflow-x:hiddenだが、子要素のautoは有効） */
        .table-scroll {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border-radius: 12px;
        background: rgba(255,255,255,0.6);
        box-shadow: 0 0 8px rgba(0,0,0,0.06);
        }

        .ranking-table {
        min-width: 520px;         /* つぶれ防止（必要に応じて調整） */
        font-size: clamp(12px, 3.6vw, 15px);
        }
        .ranking-table th, .ranking-table td {
        padding: 0.55rem 0.65rem; /* タップしやすく、詰めすぎない */
        }

        /* 戻るボタンは全幅 */
        .ranking-back-btn {
        width: 100%;
        font-weight: 800;
        border-radius: 12px;
        font-size: clamp(14px, 4.2vw, 18px);
        padding: 0.9rem 1rem;
        }
    }

    /* 400px以下の微調整 */
    @media (max-width: 400px) {
        .ranking-table { min-width: 480px; }
    }
    </style>

    <div class="container text-center ranking-page">
    <h2 class="text-dark ranking-title">ランキング（TOP10）</h2>

    <div class="ranking-wrap">
        <div class="table-scroll">
        <table class="table table-striped table-bordered ranking-table">
            <thead class="table-dark">
            <tr>
                <th>順位</th>
                <th>ニックネーム</th>
                <th>スコア</th>
                <th>日付</th>
            </tr>
            </thead>
            <tbody>
            {% for record in top_scores %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ record.nickname }}</td>
                <td>{{ record.score }}</td>
                <td>{{ record.date|date:"Y/m/d H:i" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">まだ記録がありません。</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        </div>

        <a href="{% url 'game_start' %}" class="btn btn-secondary mt-3 ranking-back-btn">
        スタート画面に戻る
        </a>
    </div>
</div>
{% endblock %}